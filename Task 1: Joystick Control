#include <Servo.h>

#define ENABLE 3
#define DIRA 5
#define DIRB 4

int xjoy = A0;
int yjoy = A1;
int joyposx;
int joyposy;
int rpm;

Servo myservo;

void setup() {
  
    myservo.attach(6);

    pinMode(ENABLE, OUTPUT);
    pinMode(DIRA, OUTPUT);
    pinMode(DIRB, OUTPUT);

}

void loop() {

  joyposy = analogRead(yjoy);
  
  if( (joyposy > 527) && (joyposy < 533)){
    analogwrite(ENABLE, LOW);
  }

  else{
    while(joyposy >= 533){
      rpm = map(joyposy, 533, 1023, 180, 250);
      analogWrite(ENABLE, rpm);
      digitalWrite(DIRA, HIGH);
      digitalWrite(DIRB, LOW);
      joyposy = analogRead(yjoy);
    }

    while(joyposy <= 527){
      rpm = map(joyposy, 527, 0, 180, 250);
      analogWrite(ENABLE, rpm);
      digitalWrite(DIRA, LOW);
      digitalWrite(DIRB, HIGH);
      joyposy = analogRead(yjoy);
    }
  }
    


  joyposx = analogRead(xjoy);

  while (joyposx > 523 || joyposx < 513){
    joyposx = map(joyposx, 0, 1023, 180, 0);
    myservo.write(joyposx);
    delay(5);
    joyposx = analogRead(xjoy);
  }
}
